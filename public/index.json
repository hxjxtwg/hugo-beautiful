[{"content":"1.docker环境安装 1.1 Docker 官方一键安装脚本:\n1curl -fsSL https://get.docker.com -o get-docker.sh 2sudo sh get-docker.sh 1.2 验证安装：\n1docker version 1docker compose version 2.安装并配置nezha面板与openlist 2.1 一键生成docker-compose.yml\n1cat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF 2services: 3 # 哪吒面板服务 4 nezha: 5 container_name: nezha 6 image: ghcr.io/nezhahq/nezha:latest 7 network_mode: \u0026#34;host\u0026#34; 8 volumes: 9 - ./nezha_data:/dashboard/data 10 restart: unless-stopped 11 12 # openlist服务 13 openlist: 14 container_name: openlist 15 image: openlistteam/openlist:latest 16 network_mode: \u0026#34;host\u0026#34; 17 environment: 18 - TZ=Asia/Shanghai 19 - OPENLIST_ADMIN_PASSWORD=用户密码 # 修改登陆密码 20 volumes: 21 - ./oplist_data:/opt/openlist/data 22 restart: unless-stopped 23EOF 2.2 设置./oplist_data文件夹的权限，确保 Openlist 容器可以正常读写\n1sudo chown -R 1001:1001 ./oplist_data 2.3 启动服务\n1docker compose up -d 3. Caddy2反向代理安装 在 Debian/Ubuntu 系统上安装 Caddy2，可以按照以下步骤操作：\n3.1 安装必要的软件包\n1sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https 3.2 添加 Caddy 的 GPG 密钥\n1curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key\u0026#39; | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg 3.3 添加 Caddy 的软件源\n1curl -1sLf \u0026#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt\u0026#39; | sudo tee /etc/apt/sources.list.d/caddy-stable.list 3.4 更新软件包列表\n1sudo apt update 3.5 安装 Caddy\n1sudo apt install caddy 3.6 检查Caddy版本，确认安装成功\n1caddy version 4. Caddy2配置反向代理 4.1 编辑 Caddyfile\n1sudo nano /etc/caddy/Caddyfile 4.2 粘贴配置如下：\n1# 哪吒面板的反向代理配置 2mb.hxjx.hidns.co { 3 reverse_proxy localhost:8008 4} 5 6# Openlist 的反向代理配置 7oplist.hxjx.hidns.co { 8 reverse_proxy localhost:5244 9} 保存并退出 (Ctrl + X -\u0026gt; Y -\u0026gt; Enter)。mb.hxjx.hidns.co、oplist.hxjx.hidns.co为域名并添加了A记录或AAA记录\n4.3 重载 Caddy 配置使其生效：\n1sudo systemctl reload caddy 4.4 其它相关命令： 启动 Caddy 服务\n1systemctl start caddy 设置 Caddy 开机自启\n1systemctl enable caddy 重启 Caddy 服务\n1systemctl restart caddy 停止 Caddy 服务\n1systemctl stop caddy 修改配置文件后重载配置（不中断服务）\n1systemctl reload caddy 查看 Caddy 运行状态\n1systemctl status caddy 5. 补充配置 由于谷歌云关闭了CDN网络，需要配置新的证书发放机构。使用Google自家证书\n5.1 获取谷歌证书的Key VPS 终端里运行这条命令（这是 GCP 自带的工具）：\n1gcloud beta publicca external-account-keys create 可能出现的情况：\n如果直接成功：它会显示 keyId 和 b64MacKey。请立刻把这两个字符串发给我。\n如果提示 API 未启用：它会问 API [publicca.googleapis.com] not enabled. Enable it? (y/N)。请输入 y 并回车。\n如果提示未登录：它会报错让登录。如果遇到这个，请告诉我，我教你另一种简单的方法。\n5.2 写入新的 Caddyfile（包含你的谷歌密钥） 1cat \u0026gt; /etc/caddy/Caddyfile \u0026lt;\u0026lt;EOF 2{ 3 # 使用 Google Trust Services (GTS) 4 acme_ca https://dv.acme-v02.api.pki.goog/directory 5 acme_eab { 6 key_id b33a63ed1f543dc24236425112983a84 7 mac_key EZBbzPPpgbzQt_GDCGNJRSnM1c-xVEqXN18e4Iajrt1G7JDjEvaIA-7BnwBiNu15twNyqMrisHwhRYPqV6B7eA 8 } 9 email xuhxjxhk@gmail.com 10} 11 12# Openlist 的反向代理配置 13oplist.hxjx.hidns.co { 14 reverse_proxy localhost:5244 15} 16 17# 哪吒面板的反向代理配置 18mb.hxjx.hidns.co { 19 reverse_proxy localhost:8008 20} 21 22# Openlist 的反向代理配置2 23oplist.cc.cd { 24 reverse_proxy localhost:5244 25} 26EOF 5.3 清理旧缓存（非常重要） 1systemctl stop caddy 2rm -rf /var/lib/caddy/.local/share/caddy 5.4 启动并见证奇迹 1systemctl start caddy 2journalctl -u caddy -n 50 -f 你会看到 Caddy 飞快地完成注册，日志里会出现 certificate obtained successfully。因为是谷歌自家的线路，这次应该在 1-2 秒内就能搞定。\n","permalink":"http://localhost:1313/posts/%E8%B0%B7%E6%AD%8C%E4%BA%91%E5%AE%89%E8%A3%85%E9%9D%A2%E6%9D%BF%E4%B8%8E%E5%8F%8D%E4%BB%A3/","summary":"","title":"谷歌云安装面板与反代"},{"content":"1. 安装unzip 1.1 对于 Debian / Ubuntu / Armbian 系统 (最常见):\n1apt-get update \u0026amp;\u0026amp; apt-get install -y unzip 1.2 对于 CentOS / RHEL / Fedora 系统:\n1yum install -y unzip 1.3 对于 Alpine Linux 系统:\n1apk add unzipz 2. vps安装节点示例 2.1 勇哥agsbx github\n1hypt=\u0026#34;\u0026#34; tupt=\u0026#34;\u0026#34; vmpt=\u0026#34;\u0026#34; uuid=\u0026#34;\u0026#34; argo=\u0026#34;y\u0026#34; agn=\u0026#34;域名\u0026#34; agk=\u0026#34;token\u0026#34; bash \u0026lt;(curl -Ls https://raw.githubusercontent.com/yonggekkk/argosbx/refs/heads/main/argosbx.sh) 2.2 老王 github\nVPS一键四协议安装脚本\n1bash \u0026lt;(curl -Ls https://raw.githubusercontent.com/eooce/sing-box/main/sing-box.sh) ssh综合工具箱一键脚本\n1curl -fsSL https://raw.githubusercontent.com/eooce/ssh_tool/main/ssh_tool.sh -o ssh_tool.sh \u0026amp;\u0026amp; chmod +x ssh_tool.sh \u0026amp;\u0026amp; ./ssh_tool.sh ","permalink":"http://localhost:1313/posts/vps%E6%8B%BE%E5%BB%BA%E8%8A%82%E7%82%B9%E7%9B%B8%E5%85%B3%E6%80%BB%E7%BB%93/","summary":"","title":"Vps拾建节点相关总结"},{"content":"docker环境安装 1. Docker 官方一键安装脚本: 1curl -fsSL https://get.docker.com -o get-docker.sh 2sudo sh get-docker.sh 2. 验证安装： 1docker version 1docker compose version 反代配置 1. 为域名添加A或AAAA记录 2.一键配置Caddyfile 1cat \u0026gt; Caddyfile \u0026lt;\u0026lt;EOF 2# Komari面板的反向代理配置 3km.hxjx.hidns.co { 4 reverse_proxy komari:25774 5} 6 7# 哪吒面板的反向代理配置 8nz.hxjx.hidns.co { 9 reverse_proxy nezha:8008 10} 11 12# Openlist的反向代理配置 13openlist.hxjx.hidns.co { 14 reverse_proxy openlist:5244 15} 16 17# Typecho博客的反向代理配置 18blog.aibomart.com { 19 reverse_proxy typecho:80 20} 21EOF 安装与配置 1. 一键生成docker-compose.yml 1cat \u0026gt; docker-compose.yml \u0026lt;\u0026lt;EOF 2services: 3 caddy: 4 image: caddy:latest 5 container_name: caddy 6 ports: 7 - \u0026#34;80:80\u0026#34; 8 - \u0026#34;443:443\u0026#34; 9 - \u0026#34;443:443/udp\u0026#34; 10 volumes: 11 - ./Caddyfile:/etc/caddy/Caddyfile 12 - ./caddy_data:/data 13 restart: unless-stopped 14 15 nezha: 16 image: ghcr.io/nezhahq/nezha:latest 17 container_name: nezha 18 ports: 19 - \u0026#34;8008:8008\u0026#34; 20 volumes: 21 - ./nezha_data:/dashboard/data 22 restart: unless-stopped 23 24 openlist: 25 image: openlistteam/openlist:latest 26 container_name: openlist 27 user: \u0026#39;0:0\u0026#39; 28 ports: 29 - \u0026#34;5244:5244\u0026#34; 30 environment: 31 - TZ=Asia/Shanghai 32 - UMASK=022 33 - OPENLIST_ADMIN_PASSWORD=xxsky1127 # 请务必修改 34 volumes: 35 - ./oplist_data:/opt/openlist/data 36 restart: unless-stopped 37 38 komari: 39 image: ghcr.io/komari-monitor/komari:latest 40 container_name: komari 41 ports: 42 - \u0026#34;25774:25774\u0026#34; 43 environment: 44 - TZ=Asia/Shanghai 45 - ADMIN_USERNAME=admin 46 - ADMIN_PASSWORD=xxsky1127 47 volumes: 48 - ./komari_data:/app/data 49 restart: unless-stopped 50 51 # Typecho 博客服务 52 typecho: 53 image: joyqi/typecho:nightly-php8.2-apache # 官方 Apache 镜像 54 container_name: typecho 55 ports: 56 - \u0026#34;8383:80\u0026#34; # 宿主机 8080 -\u0026gt; 容器 80 57 environment: 58 TZ: Asia/Shanghai # 设置时区为上海 59 volumes: 60 - ./typecho/app/usr:/app/usr # 当前目录存放 Typecho 文件 61 depends_on: 62 - db # 依赖数据库 63 restart: always # 自动重启策略 64 65 # 数据库服务 66 db: 67 image: mariadb:10.6 # MariaDB 镜像 68 container_name: typecho-db 69 environment: 70 MYSQL_ROOT_PASSWORD: xxsky1127 # 数据库 root 密码（请修改） 71 MYSQL_DATABASE: typecho # 默认数据库 72 MYSQL_USER: typecho # 数据库用户 73 MYSQL_PASSWORD: xxsky1127 # 用户密码（请修改） 74 TZ: Asia/Shanghai # 时区 75 volumes: 76 - ./db:/var/lib/mysql # 数据库数据存放当前目录 77 restart: always 78 79networks: 80 default: 81 name: app_network 82EOF 2. 启动服务 1docker compose up -d 3. 停止服务 1docker compose down 4. 设置./oplist_data文件夹的权限，确保 Openlist 容器可以正常读写 1sudo chown -R 1001:1001 ./oplist_data 5. 启动服务 1docker compose up -d 6. 查看服务 1docker compose ps 其它操作 1. 查看日志 1docker compose logs komari # 查看komari，其它相应的服务名 2. 停止服务 1docker compose stop komari # 停止komari，其它相应的服务名 3. 删除数据 1sudo rm -rf ./komari_data # 删除komari数据，其它相应的数据名 4. 重启服务 1docker compose up -d komari # 重启komari，其它相应的服务名 ","permalink":"http://localhost:1313/posts/docker-compose%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E4%B8%8Ecaddy%E5%8F%8D%E4%BB%A3/","summary":"","title":"Docker Compose部署服务与caddy反代"},{"content":"1. warp安装 首次运行\n1wget -N https://gitlab.com/fscarmen/warp/-/raw/main/menu.sh \u0026amp;\u0026amp; bash menu.sh 日常维护\n1warp 手动重连\n1wg-quick down warp \u0026amp;\u0026gt;/dev/null; sed -i \u0026#34;s/Endpoint.*/Endpoint = engage.cloudflareclient.com:4500/\u0026#34; /etc/wireguard/warp.conf; warp o 2. Warp 自动重连脚本部署 本指南将帮助您在 VPS 上部署一个脚本，以自动修复 Warp 的 IPv4 出口掉线问题\n2.1 创建并编辑脚本文件 首先，在您的 VPS 上创建一个名为 reconnect_warp.sh 的文件\n1nano reconnect_warp.sh 打开编辑器后，将下面的完整脚本代码复制并粘贴进去。粘贴完成后，按 Ctrl + X，然后按 Y，最后按 Enter 保存并退出。\n完整脚本代码：\n1#!/bin/bash 2 3# Warp 自动重启脚本 4# 脚本会检查 IPv4 网络连通性，如果发现网络不通，就会自动修复 Warp。 5 6# 尝试 ping 一个可靠的 IPv4 地址，只发送一个数据包，超时 3 秒。 7ping -c 1 -w 3 8.8.8.8 \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 8 9# $? 不为 0 表示 ping 失败，执行修复逻辑。 10if [ $? -ne 0 ]; then 11 echo \u0026#34;$(date): IPv4 network connection failed, repairing Warp...\u0026#34; 12 13 # 强制 Warp 隧道关闭 14 wg-quick down warp \u0026amp;\u0026gt;/dev/null 15 16 # 关键修复：使用 | 作为分隔符，确保 Endpoint 被正确替换为标准的 WireGuard 格式。 17 sed -i \u0026#39;s|Endpoint.*|Endpoint = engage.cloudflareclient.com:4500|\u0026#39; /etc/wireguard/warp.conf 18 19 # 重新连接 Warp 20 warp o 21else 22 echo \u0026#34;$(date): IPv4 network connection is active. No action needed.\u0026#34; 23fi 或者一键脚本创建reconnect_warp.sh\n1cat \u0026gt; /root/reconnect_warp.sh \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; 2#!/bin/bash 3 4# Warp 自动重启脚本 5# 脚本会检查 IPv4 网络连通性，如果发现网络不通，就会自动修复 Warp。 6 7# 尝试 ping 一个可靠的 IPv4 地址，只发送一个数据包，超时 3 秒。 8ping -c 1 -w 3 8.8.8.8 \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 9 10# $? 不为 0 表示 ping 失败，执行修复逻辑。 11if [ $? -ne 0 ]; then 12 echo \u0026#34;$(date): IPv4 network connection failed, repairing Warp...\u0026#34; 13 14 # 强制 Warp 隧道关闭 15 wg-quick down warp \u0026amp;\u0026gt;/dev/null 16 17 # 关键修复：使用 | 作为分隔符，确保 Endpoint 被正确替换为标准的 WireGuard 格式。 18 sed -i \u0026#39;s|Endpoint.*|Endpoint = engage.cloudflareclient.com:4500|\u0026#39; /etc/wireguard/warp.conf 19 20 # 重新连接 Warp 21 warp o 22else 23 echo \u0026#34;$(date): IPv4 network connection is active. No action needed.\u0026#34; 24fi 25EOF 2.2 赋予脚本执行权限 接下来，您需要让系统知道这个文件是一个可执行的脚本。在终端中运行以下命令：\n1chmod +x reconnect_warp.sh 2.3 将脚本添加到定时任务 (Cron) 将脚本添加到定时任务 (Cron)\n1crontab -e 在打开的文件末尾，新开一行并添加以下命令。这会使脚本每 10 分钟自动运行一次\n1*/5 * * * * /root/reconnect_warp.sh 或\n1*/10 * * * * /bin/bash /root/reconnect_warp.sh 完成以上步骤后，即使您的 Warp 再次掉线，系统也会自动检测并修复它，您无需再手动干预。\n3. 测试 3.1 手动断开warp连接\n1wg-quick down warp 3.2 运行脚本测试自动重连\n1/bin/bash /root/reconnect_warp.sh ","permalink":"http://localhost:1313/posts/warp%E8%87%AA%E5%8A%A8%E9%87%8D%E8%BF%9E%E8%84%9A%E6%9C%AC%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/","summary":"","title":"Warp自动重连脚本部署指南"},{"content":"整理的Markdown语法，方便参考写博文。\n1. 标题 (Headings) 使用 # 号创建标题，支持一到六级。# 的数量代表标题的级别\n语法：\n# 一级标题\n## 二级标题\n### 三级标题\n#### 四级标题\n##### 五级标题\n###### 六级标题\n2. 段落和换行 (Paragraphs \u0026amp; Line Breaks) 段落：一个或多个连续的文本行构成一个段落。段落之间需要一个或多个空行来分隔\n强制换行：如果您想在段落内强制换行，可以在一行的末尾输入两个或更多的空格，然后按回车\n3. 文字格式 (Text Formatting) 粗体 (Bold): **文字** 或 __文字__\n斜体 (Italic): *文字* 或 _文字_\n粗斜体 (Bold \u0026amp; Italic): ***文字*** 或 ___文字___\n删除线 (Strikethrough): ~~文字~~\n下划线 (Underline): HTML 标签 \u0026lt;u\u0026gt;文字\u0026lt;/u\u0026gt; (非标准 Markdown)\n语法：\n**这是粗体**\n*这是斜体*\n***这是粗斜体***\n~~这是删除线~~\n\u0026lt;u\u0026gt;这是下划线\u0026lt;/u\u0026gt;\n示例：\n这是粗体\n这是斜体\n这是粗斜体\n这是删除线\n这是下划线\n4. 列表 (Lists) 无序列表 (Unordered List)\n使用 -, +, 或*标记，符号后需加一个空格。\n语法：\n-或* 项目一\n-或* 项目二\n-或* 嵌套项目一\r-或* 嵌套项目二\r效果：\n项目一\n项目二\n嵌套项目一 嵌套项目二 有序列表 (Ordered List)\n使用数字加英文句点.，然后空格接内容，数字顺序不影响最终显示。\n语法：\n第一项 第二项 第三项 5. 链接 (Links) 语法：\n[链接显示的文字](链接地址 \u0026quot;可选的标题\u0026quot;)\n1[访问我的博客](https://bg.363689.xyz \u0026#34;我的个人博客\u0026#34;) 效果： 访问我的博客\n6. 图片 (Images) 语法与链接类似，但在最前面加一个感叹号 !\n语法：\n![图片替代文字](图片地址 \u0026quot;可选的标题\u0026quot;)\n示例：\n1![Logo](https://placehold.co/150x50/dbeafe/3b82f6?text=Logo) HTML 标签插入图片（用于更多控制）\n当标准 Markdown 语法不足以满足需求时（例如，需要调整图片大小、浮动、添加边框等），可以回退到使用 HTML 的 标签。这提供了更多的控制，因为它允许你使用 HTML 属性和 CSS 样式。\n语法：\n1\u0026lt;img src=\u0026#34;图片URL\u0026#34; alt=\u0026#34;alt text\u0026#34; title=\u0026#34;可选的标题\u0026#34; width=\u0026#34;宽度\u0026#34; height=\u0026#34;高度\u0026#34; style=\u0026#34;CSS样式\u0026#34;\u0026gt; 常用属性： src：必需。图片的 URL。 alt：必需。替代文本，与 Markdown 中的 alt text 相同。 title：可选的悬停文本，与 Markdown 中的 title 相同。 width：设置图片的宽度（可以为像素值 px 或百分比 %）。 height：设置图片的高度（可以为像素值 px 或百分比 %）。 style：通过 CSS 样式来控制图片，这是最强大的地方，可以设置边框、外边距、浮动、甚至一些高级效果。\n示例（调整大小）： 这张图片宽度为200像素\n1\u0026lt;img src=\u0026#34;https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_960_720.jpg\u0026#34; alt=\u0026#34;风景图\u0026#34; width=\u0026#34;200\u0026#34;\u0026gt; 效果：\n示例:\n1 \u0026lt;div style=\u0026#34;text-align: center;\u0026#34;\u0026gt; 2 \u0026lt;img src=\u0026#34;https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_960_720.jpg\u0026#34; alt=\u0026#34;风景图\u0026#34; width=\u0026#34;300\u0026#34; style=\u0026#34;border: 2px solid blue; border-radius: 5px; margin: 10px;\u0026#34;\u0026gt; 3 \u0026lt;p style=\u0026#34;font-size: 0.9em; color: gray;\u0026#34;\u0026gt;这是带蓝色边框的居中图片。\u0026lt;/p\u0026gt; 4 \u0026lt;/div\u0026gt; 效果：\n7. 引用 (Blockquotes) 引用(Blockquote)是一种常用于引述他人话语、文章段落或者突出显示某段文字的格式。它的语法非常简单。\n基本用法\n在要引用的文本段落前加上一个大于号 \u0026gt;\n语法：\n1\u0026gt; 这里是一段引用的文字。它会自动被格式化，通常会以缩进或者左侧边框的形式显示。 渲染效果：\n这里是一段引用的文字。它会自动被格式化，通常会以缩进或者左侧边框的形式显示。\n多段落引用 如果你想引用多个段落，可以在每个段落前都加上 \u0026gt;\n语法：\n1\u0026gt; 这是第一个引用的段落。 2\u0026gt; 3\u0026gt; \u0026gt; 这是第二个引用的段落。在段落之间留一个空行，并在新段落前也加上 `\u0026gt;`。 渲染效果：\n这是第一个引用的段落。\n这是第二个引用的段落。在段落之间留一个空行，并在新段落前也加上 \u0026gt;。\n懒加载模式\n对于一个连续的长段落，你也可以只在第一行前面加上 \u0026gt;，后面的行会自动被包含在引用中，直到遇到一个空行。\n1\u0026gt; 这是一个很长的引用段落，为了方便书写，我只在第一行的开头加了大于号。 2接下来的几行文字，即使前面没有大于号，也会被视为同一次引用的一部分。 3直到这里为止。 4 5这一行就不在引用内了。 渲染效果：\n这是一个很长的引用段落，为了方便书写，我只在第一行的开头加了大于号。 接下来的几行文字，即使前面没有大于号，也会被视为同一次引用的一部分。 直到这里为止。\n这一行就不在引用内了。\n嵌套引用\n引用可以嵌套使用，只需要增加 \u0026gt; 的数量即可。\n语法：\n1\u0026gt; 这是第一层引用。 2\u0026gt; 3\u0026gt; \u0026gt; 这是嵌套的第二层引用。 4\u0026gt; \u0026gt; 5\u0026gt; \u0026gt; \u0026gt; 这是更深一层的第三层引用。 6\u0026gt; \u0026gt; \u0026gt; 7\u0026gt; 回到第一层引用。 渲染效果：\n这是第一层引用。\n这是嵌套的第二层引用。\n这是更深一层的第三层引用。\n回到第一层引用。\n在引用中使用其他 Markdown 语法\n引用块内几乎可以包含所有其他的 Markdown 元素，比如标题、列表、粗体、代码块等。\n语法：\n1\u0026gt; ### 这是一个在引用中的三级标题 2 3\u0026gt; 1. 这是引用中的一个 **有序列表** 项。 4\u0026gt; 2. 这是列表的第二项，包含一些 `行内代码`。 5\u0026gt; - 这是一个 *无序列表* 项。 6 7\u0026gt; ```python 8\u0026gt; # 这是一个代码块 9\u0026gt; print(\u0026#34;Hello, Markdown!\u0026#34;) 10 ``` 渲染效果：\n这是一个在引用中的三级标题 这是引用中的一个 有序列表 项。 这是列表的第二项，包含一些行内代码。 这是一个 无序列表 项。 1# 这是一个代码块 2print(\u0026#34;Hello, Markdown!\u0026#34;) 8. 代码 (Code) 行内代码 (Inline Code)\n使用一对反引号` 包裹\n语法： 这行代码是 let name = \u0026ldquo;Markdown\u0026rdquo;;\n代码块 (Code Block)\n使用三对反引号 包裹，并可以在第一组反引号后指定语言（如 javascript, python, bash）以实现语法高亮。\n示例：\n1JavaScript 示例： 2 3 4 ```javascript 5 function sayHello() { 6 7 8 console.log(\u0026#34;Hello, world!\u0026#34;); 9 10 11 } 12 ``` JavaScript 效果：\n1function sayHello() { 2 3 console.log(\u0026#34;Hello, world!\u0026#34;); 4 5} 示例：\n1```bash 2# 列出当前目录的文件和文件夹 3 4ls -la 5 6# 输出一条消息到终端 7 8echo \u0026#34;这是一个 Bash 脚本示例\u0026#34; 9 10# 进入 \u0026#39;documents\u0026#39; 文件夹 11 12cd documents 13``` Bash/Shell 效果：\n1# 列出当前目录的文件和文件夹 2 3ls -la 4 5# 输出一条消息到终端 6 7echo \u0026#34;这是一个 Bash 脚本示例\u0026#34; 8 9# 进入 \u0026#39;documents\u0026#39; 文件夹 10 11cd documents/ 9. 表格 (Tables) 基本语法\nMarkdown 表格使用管道符 | 来定义单元格和列，使用连字符 - 来分隔表头和表格主体。\n基本结构：\n1| 表头 1 | 表头 2 | 表头 3 | 2|---|---|---| 3| 内容 1 | 内容 2 | 内容 3 | 4| 内容 4 | 内容 5 | 内容 6 | 渲染效果：\n表头 1 表头 2 表头 3 内容 1 内容 2 内容 3 内容 4 内容 5 内容 6 关键点：\n第一行是表头，第二行是分隔符行，用于将表头和表格内容分开。\n第三行及以后是表格的每一行数据。\n每一行都由管道符 | 分隔单元格。\n最外侧的管道符 | 是可选的，但为了美观和清晰，建议加上。\n分隔符行中的连字符 - 数量至少需要一个，但为了对齐美观，可以增加多个。\n对齐方式\n您可以在分隔符行中使用冒号 : 来控制列的对齐方式。\n:\u0026mdash; 或 \u0026mdash;左对齐（默认）\n:\u0026ndash;: 居中对齐\n\u0026mdash;: 右对齐\n示例：\n1| 左对齐 | 居中 | 右对齐 | 2| :--- | :--: | ---: | 3| 文本 | 文本 | 文本 | 4| 更多内容 | 更多内容 | 更多内容 | 渲染效果：\n左对齐 居中 右对齐 文本 文本 文本 更多内容 更多内容 更多内容 在单元格内使用其他 Markdown 语法 表格的单元格内可以包含几乎所有的行内 Markdown 格式，例如链接、粗体、斜体、删除线、代码等。\n示例：\n1| 格式 | 示例 | 描述 | 2|---|---|---| 3| **粗体** | `**Bold Text**` | 使文本加粗。 | 4| *斜体* | `*Italic Text*` | 使文本倾斜。 | 5| `代码` | `` `code()` `` | 用于显示简短的代码片段。 | 6| [链接](https://www.google.com) | `[链接](https://www.google.com)` | 创建一个超链接。 | 7| ~~删除线~~ | `~~Strikethrough~~` | 给文本添加删除线。 | 8| 换行 | 使用 `\u0026lt;br\u0026gt;` 标签 | 可以在单元格内强制换行。 | 渲染效果：\n格式 示例 描述 粗体 Bold Text 使文本加粗。 斜体 Italic Text 使文本倾斜。 代码 code() 用于显示简短的代码片段。 链接 链接 创建一个超链接。 删除线 Strikethrough 给文本添加删除线。 换行 使用 \u0026lt;br\u0026gt; 标签 可以在单元格内强制换行。 包含管道符 | 如果你的单元格内容本身就包含管道符 |，你需要使用它的 HTML 实体编码 \u0026amp;#124; 来代替。\n示例：\n1| 名称 | 描述 | 2|---|---| 3| 管道符 | 这是 \u0026amp;#124; 字符的示例。 | 渲染效果：\n名称 描述 管道符 这是| 字符的示例。 分割线 (Horizontal Rule) 在一行中使用三个或更多的 *, -, 或 _\n语法：\n---\n***\n___\n字体颜色 需要明确一点：纯粹的、标准的 Markdown 语法本身并不支持设置字体颜色。 Markdown 的设计初衷是为了简化内容创作，专注于文本的结构（如标题、列表、粗体），而不是外观样式（如颜色、字体大小）。不过，由于大多数 Markdown 解析器都兼容 HTML，我们可以通过内联 HTML 的方式来给文本添加颜色。最常用的方法是使用 标签配合 style 属性，或者使用已经不被推荐但仍然有效的 标签。\n使用 标签（推荐） 这是最现代、最灵活的方法，符合当前的网页标准 (CSS)。\n语法：\n1\u0026lt;span style=\u0026#34;color:颜色名或十六进制代码\u0026#34;\u0026gt;你的文本\u0026lt;/span\u0026gt; 示例：\n我想把这段文字设置成\n1\u0026lt;span style=\u0026#34;color:red\u0026#34;\u0026gt;红色\u0026lt;/span\u0026gt; 也可以使用十六进制颜色代码，比如\n1\u0026lt;span style=\u0026#34;color:#008000\u0026#34;\u0026gt;绿色\u0026lt;/span\u0026gt; 或者设置为\n1\u0026lt;span style=\u0026#34;color:rgb(0, 0, 255)\u0026#34;\u0026gt;蓝色\u0026lt;/span\u0026gt; 使用 \u0026lt;font\u0026gt; 标签（不推荐）\n\u0026lt;font\u0026gt; 标签在旧的 HTML 标准 (HTML4) 中使用，现在已经被废弃，不推荐在新的项目中使用。但因为简单直观，在很多 Markdown 环境中仍然有效。\n语法：\n1\u0026lt;font color=\u0026#34;颜色名或十六进制代码\u0026#34;\u0026gt;你的文本\u0026lt;/font\u0026gt; 任务列表（Task List） 语法:\n任务列表的语法是在标准的无序列表项（使用 -, *, 或 +）后面加上一个方括号 []。\n[ ]：表示一个未完成的任务。注意：[ 和 ] 之间必须有一个空格。\n[x]：表示一个已完成的任务。注意：x 可以是小写也可以是大写，但小写更常见。\n基本结构：\n1- [x] 完成报告的第一部分 2- [ ] 撰写邮件通知团队 3- [ ] 安排下周的会议 渲染效果：\n完成报告的第一部分 撰写邮件通知团队 安排下周的会议 如何使用\n创建列表：\n就像创建普通的无序列表一样，以 -, *, 或 + 开头。\n添加复选框：\n在列表项的文本前，加上 [ ] (未完成) 或 [x] (已完成)。\n示例：\n1#### 项目A的待办事项 2 3- [x] 需求分析和文档编写 4- [x] UI/UX 设计初稿 5- [ ] 前端开发 6 - [x] 搭建项目框架 7 - [ ] 实现登录页面 8 - [ ] 对接用户数据API 9- [ ] 后端开发 10 - [ ] 数据库设计 11 - [ ] 编写用户认证接口 12- [ ] 测试和部署 13 14#### 购物清单 15 16* [ ] 牛奶 17* [x] 面包 18* [ ] 鸡蛋 渲染效果：\n项目A的待办事项 需求分析和文档编写 UI/UX 设计初稿 前端开发 搭建项目框架 实现登录页面 对接用户数据API 后端开发 数据库设计 编写用户认证接口 测试和部署 购物清单 牛奶 面包 鸡蛋 交互性 一个重要的特性是，在许多支持任务列表的 Markdown 渲染器（如 GitHub 的评论区、Typora 编辑器）中，这些复选框是可以点击的。当你点击一个复选框时，它会自动在 [ ] 和 [x] 之间切换，并保存更改。\n总结 任务列表是 Markdown 一个非常实用和直观的扩展功能，它结合了列表的结构化和任务管理的功能性。记住核心语法 - [ ] 和 - [x] 就可以了。\n","permalink":"http://localhost:1313/posts/markdown%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E6%8C%87%E5%8D%97/","summary":"\u003cp\u003e整理的Markdown语法，方便参考写博文。\u003c/p\u003e","title":"Markdown详细语法指南"},{"content":"正则表达式的重命名\n1. 在前面加上中文名并保留年份第几季第几集 第一行 (源文件名正则表达式):\n1^(\\d{4})\\.(S\\d{2})(E\\d{2})\\..*\\.(.*)$ 第二行 (新文件名正则表达式):\n1[您的中文名称].$1.$2$3.$4 示例 源文件: 2025.S02E01.2160p.MAX+.HDR.60fps..WEB-DL.HEVC.10bit.DDP.mp4\n第一行 (匹配): ^(\\d{4}).(S\\d{2})(E\\d{2})...(.)$\n第二行 (替换为): 剧集名称.$1.$2$3.$4\n新文件名: 剧集名称.2025.S02E01.mp4\n正则表达式分解 第一行 (匹配):\n^：匹配文件名的开头。\n(\\d{4})：捕获组 1 ($1)。匹配并捕获4位数字（年份 2025）。\n.：匹配一个字面上的点。\n(S\\d{2})：捕获组 2 ($2)。匹配并捕获 \u0026ldquo;S\u0026rdquo; 和两位数字（季 S02）。\n(E\\d{2})：捕获组 3 ($3)。匹配并捕获 \u0026ldquo;E\u0026rdquo; 和两位数字（集 E01）。\n..*：匹配一个点，然后匹配所有中间的“垃圾”元数据。\n.：匹配最后一个点（在后缀名前的那个点）。\n(.*)：捕获组 4 ($4)。匹配并捕获文件后缀（mp4）。\n$：匹配文件名的结尾。\n第二行 (替换):\n剧集名称.：添加您想要的中文名和一个点。\n$1: 插入捕获的年份（2025）。\n.: 插入一个点。\n$2: 插入捕获的季（S02）。\n$3: 插入捕获的集（E01）。\n.: 插入一个点。\n$4: 插入捕获的后缀（mp4）\n2.把英文名改中文名并保留年份第几季第几集 示例 源文件: my moontv.2025.S02E01.2160p.MAX+.HDR.60fps..WEB-DL.HEVC.10bit.DDP.mp4\n第一行 (源文件名正则表达式):\n1^.*\\.(\\d{4})\\.(S\\d{2})(E\\d{2})\\..*\\.(.*)$ 第二行 (新文件名正则表达式):\n1[您的中文名称].$1.$2$3.$4 3.保留所有元数据,只在前面加入中文名 第一行 (源文件名正则表达式):\n1^(.*)$ 第二行 (新文件名正则表达式):\n1[您的中文名称].$1 应用后: [您的中文名称].2025.S02E01.2160p.MAX+.HDR.60fps..WEB-DL.HEVC.10bit.DDP.mp4\n4. “反向”重命名修复 第一行 (匹配错误的文件)：\n1^(错误名)(.*)$ 第二行 (替换为正确的)：\n1正确名$2 ^：匹配开头。\n(错误名)：捕获组 1 ($1)。精确匹配您打错的那个词。\n(.*)：捕获组 2 ($2)。捕获文件名中所有剩余的部分 (例如 .2025.S02E01.mp4)。\n$：匹配结尾。\n正确名：输入正确的中文名。\n$2：插入我们刚刚捕获的“文件名剩余部分”。\n","permalink":"http://localhost:1313/posts/%E5%85%B3%E4%BA%8Eopenlist%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D/","summary":"\u003cp\u003e正则表达式的重命名\u003c/p\u003e","title":"关于openlist文件命名"},{"content":"将 LunaTV（xuhxjx/LunaTV）这个纯网页项目，打包成一个安卓 APP。这个 APP 必须能正确处理全屏播放（自动旋转、隐藏状态栏、适配刘海屏），并且在启动和退出全屏时能正确显示/隐藏状态栏。\n阶段一：【准备】安装所有必备工具 这是“搭建工厂”的阶段，在您的 Windows 电脑上准备好所有开发工具。\n1. Node.js： 确保已安装（您使用的是 v20.19.5）。 2. Git： 确保已安装（用于下载项目）。 3. Android Studio： 确保已安装，并已完成所有初始 SDK 组件的下载。 4. pnpm / npm： 确保 Node.js 自带的 npm 可用。 阶段二：【改造】项目配置与依赖（命令行） 这是最复杂、也是最关键的阶段。我们把“纯网页” (LunaTV) 改造为“可以打包的 APP”。\n1. 获取项目代码： 我们最初尝试 git clone，但遇到了网络问题。\n最终方案： 直接从 https://github.com/xuhxjx/LunaTV 下载 ZIP 压缩包。\n操作： 解压 LunaTV-main.zip，将其重命名为 LunaTV，并移动到您的工作目录（例如 D:\\Tools\\LunaTV）。\n2. 【关键修复-1】解决“依赖冲突”： LunaTV 项目的 package.json 依赖是过时且损坏的。\npnpm install 和 npm install 都会失败（ERESOLVE 错误）。\n最终方案： 我们必须使用 npm 并附带一个“强制”参数来解决。\n打开cmd命令窗口操作：\n1# 进入项目目录 2D: 3cd D:\\Tools\\LunaTV 1# 彻底清除旧的/损坏的包（如果存在） 2rd /s /q node_modules 3del pnpm-lock.yaml 4del package-lock.json 1# 【关键】使用 --legacy-peer-deps 强制安装 2npm install --legacy-peer-deps (这个过程会很慢（10-20分钟），并且会显示很多 WARN 警告和 vulnerabilities 漏洞，这些都是正常的，可以安全忽略。) 3. 安装 Capacitor（添加“APP底盘”）： 我们同样需要使用 legacy-peer-deps “作弊码”来安装 Capacitor。\n操作：\n1# 安装 Capacitor 核心 2npm install @capacitor/core --legacy-peer-deps 1# 安装 Android 平台 2npm install @capacitor/android --legacy-peer-deps 1# 安装 Capacitor 命令行工具 2npm install -D @capacitor/cli --legacy-peer-deps 4. 初始化 Capacitor（创建配置文件）： 操作： 1npx cap init 它会提问：\nApp Name? -\u0026gt; XxskyTV (您输入的名字)\nApp ID? -\u0026gt; com.xxsky.lunatv (您输入的ID)\nweb asset directory? -\u0026gt; (我们最初填了 out，这是错误的,应该保持默认public)\n5. 【关键修复-2】配置 Capacitor 并“欺骗”它： npx cap add 命令需要一个包含 index.html 的 webDir（网页目录）才能运行，但 LunaTV 并没有现成的。\n最终方案： 我们将 webDir 指向 public 文件夹，并手动在里面创建一个“假”的 index.html。\n操作：\n用记事本打开 D:\\Tools\\LunaTV\\capacitor.config.ts 文件。\n将其内容替换为（确保填入您的 appId, appName 和正确的 url）：\n1import { CapacitorConfig } from \u0026#39;@capacitor/cli\u0026#39;; // \u0026lt;-- 关键：添加这一行 2 3const config: CapacitorConfig = { 4 appId: \u0026#39;com.xxsky.lunatv\u0026#39;, // 您的 App ID 5 appName: \u0026#39;XxskyTV\u0026#39;, // 您的 App Name 6 7 // 【关键】必须指向 \u0026#39;public\u0026#39; 8 webDir: \u0026#39;public\u0026#39;, 9 10 // 【关键】指向您的服务器网址 11 server: { 12 url: \u0026#39;https://mv.hxjx.dpdns.org\u0026#39; 13 } 14}; 15 16export default config; 保存并关闭文件。 回到 cmd 命令行，运行“欺骗”命令： 1# 在 public 文件夹里创建一个空的 index.html 2echo \u0026#34;\u0026lt;html\u0026gt;\u0026lt;/html\u0026gt;\u0026#34; \u0026gt; public/index.html 6. 构建与添加平台： 我们需要运行 npm run build 来生成 manifest，并创建 android 文件夹。\n操作：\n1# 运行构建（它会失败，但能生成 manifest） 2# 我们修复了 \u0026#34;Cannot find module \u0026#39;./impl\u0026#39;\u0026#34; 的BUG 3# 最终 `npm run build` 成功运行 4npm run build 1# 添加 Android 平台 2npx cap add android 1# 同步所有配置 2npx cap sync android (在这个过程中，我们还安装了 @capacitor/status-bar 和 @capacitor/screen-orientation 插件，但最后发现它们是“敌人”，所以我们最终把它们卸载了。最终的完美方案里不需要它们。) 阶段三：【原生修复】解决全屏 BUG（Android Studio） 这是我们能“完美实现”的最关键一步。我们发现所有问题（状态栏、刘海屏、旋转）都必须通过修改原生 Java 代码来接管，而不是靠插件。\n1. 打开项目： 启动 Android Studio。\n点击 \u0026ldquo;Open\u0026rdquo; (打开)。\n选择 D:\\Tools\\LunaTV\\android 文件夹。\n2. 等待 Gradle 同步： 第一次打开会很慢，但最终会成功。 3.【终极修复】替换 MainActivity.java： 这是我们所有修复工作的结晶。这段代码教会了 APP 如何像“浏览器”一样处理全屏。\n操作：\n在 Android Studio 的左侧文件树中，导航到： app -\u0026gt; java -\u0026gt; com.xxsky.lunatv -\u0026gt; MainActivity.java\n双击打开它。\n删除里面的所有内容。\n粘贴以下**(这个版本 = 刘海修复 + 全屏播放 + 自动旋转 + “智能”隐藏UI + 【新功能】“完整”的“返回键”拦截)**的代码：\n1package com.xxsky.lunatv; // 这是您的包名 2 3import android.content.pm.ActivityInfo; 4import android.os.Build; 5import android.os.Bundle; 6import android.view.View; 7import android.view.ViewGroup; 8import android.view.Window; 9import android.view.WindowManager; 10import android.webkit.WebChromeClient; 11import android.webkit.WebView; 12import android.widget.FrameLayout; 13import com.getcapacitor.BridgeActivity; 14import android.view.WindowInsets; 15import android.view.WindowInsetsController; 16 17public class MainActivity extends BridgeActivity { 18 19 private View customView; 20 private WebChromeClient.CustomViewCallback customViewCallback; 21 private FrameLayout fullscreenContainer; 22 private WebView webView; // 我们需要这个变量 23 24 @Override 25 public void onCreate(Bundle savedInstanceState) { 26 super.onCreate(savedInstanceState); 27 28 // --- 1. 【修复刘海屏】(不变) --- 29 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.P) { 30 Window w = getWindow(); 31 WindowManager.LayoutParams lp = w.getAttributes(); 32 lp.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES; 33 w.setAttributes(lp); 34 } 35 36 // --- 2. 【设置全屏播放器】 (不变) --- 37 38 this.webView = this.bridge.getWebView(); 39 40 this.webView.setWebChromeClient(new WebChromeClient() { 41 42 @Override 43 public void onShowCustomView(View view, CustomViewCallback callback) { 44 if (customView != null) { onHideCustomView(); return; } 45 customView = view; 46 customViewCallback = callback; 47 fullscreenContainer = new FrameLayout(MainActivity.this); 48 fullscreenContainer.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 49 fullscreenContainer.setBackgroundColor(getResources().getColor(android.R.color.black)); 50 fullscreenContainer.addView(customView, new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 51 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 52 decorView.addView(fullscreenContainer, new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 53 54 hideSystemUI(); 55 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 56 } 57 58 @Override 59 public void onHideCustomView() { 60 if (customView == null) { return; } 61 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 62 decorView.removeView(fullscreenContainer); 63 fullscreenContainer = null; 64 customView = null; 65 if (customViewCallback != null) { 66 customViewCallback.onCustomViewHidden(); 67 } 68 69 showSystemUI(); 70 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 71 } 72 }); 73 } 74 75 // --- 3. 【【【“返回键”的“终极修复”（“复制”版）】】】 --- 76 @Override 77 public void onBackPressed() { 78 // a. 当用户按下“返回”... 79 80 // b. ...【优先】检查“全屏播放器”(`customView`) 是不是“正在显示” 81 if (this.customView != null) { 82 // c. ...如果是，我们就“退出全屏” 83 84 // ↓↓↓ 我们“复制” onHideCustomView() 里的代码 ↓↓↓ 85 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 86 decorView.removeView(fullscreenContainer); 87 fullscreenContainer = null; 88 customView = null; 89 if (customViewCallback != null) { 90 customViewCallback.onCustomViewHidden(); 91 } 92 showSystemUI(); 93 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 94 // ↑↑↑ “复制”结束 ↑↑↑ 95 96 } 97 // d. ...【其次】检查“网页”(`webView`) 是不是“可以后退” 98 else if (this.webView != null \u0026amp;\u0026amp; this.webView.canGoBack()) { 99 // e. ...如果是，我们就在“网页”里后退 100 this.webView.goBack(); 101 } 102 // f. ...【最后】如果“既没有全屏”也“不能后退” (在主页) 103 else { 104 // g. ...我们就“退出APP” 105 super.onBackPressed(); 106 } 107 } 108 109 110 // --- 4. 【“智能”隐藏UI函数”（不变）】 --- 111 private void hideSystemUI() { 112 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.R) { 113 WindowInsetsController controller = getWindow().getInsetsController(); 114 if (controller != null) { 115 controller.hide(WindowInsets.Type.statusBars() | WindowInsets.Type.navigationBars()); 116 controller.setSystemBarsBehavior(WindowInsetsController.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE); 117 } 118 } else { 119 View decorView = getWindow().getDecorView(); 120 decorView.setSystemUiVisibility( 121 View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY 122 | View.SYSTEM_UI_FLAG_LAYOUT_STABLE 123 | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION 124 | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN 125 | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION 126 | View.SYSTEM_UI_FLAG_FULLSCREEN); 127 } 128 } 129 130 // --- 5. 【“智能”显示UI函数”（不变）】 --- 131 private void showSystemUI() { 132 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.R) { 133 WindowInsetsController controller = getWindow().getInsetsController(); 134 if (controller != null) { 135 controller.show(WindowInsets.Type.statusBars() | WindowInsets.Type.navigationBars()); 136 } 137 } else { 138 View decorView = getWindow().getDecorView(); 139 decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE); 140 } 141 } 142} 保存这个文件 (Ctrl + S)。 另一个不完美方案(这个版本 = 刘海修复 + 全屏播放 + 自动旋转 + “智能”隐藏UI + “完整”的“返回键”拦截+沉浸式‘网页标题栏与手机状态栏重叠’)的代码：\n1package com.xxsky.lunatv; // 这是您的包名 2 3import android.content.pm.ActivityInfo; 4import android.os.Build; 5import android.os.Bundle; 6import android.view.View; 7import android.view.ViewGroup; 8import android.view.Window; 9import android.view.WindowManager; 10import android.webkit.WebChromeClient; 11import android.webkit.WebView; 12import android.widget.FrameLayout; 13import com.getcapacitor.BridgeActivity; 14import android.view.Window; 15import android.view.WindowManager; 16import android.os.Build; 17import android.view.WindowInsets; 18import android.view.WindowInsetsController; 19 20public class MainActivity extends BridgeActivity { 21 22 private View customView; 23 private WebChromeClient.CustomViewCallback customViewCallback; 24 private FrameLayout fullscreenContainer; 25 private WebView webView; // 我们需要这个变量 26 27 @Override 28 public void onCreate(Bundle savedInstanceState) { 29 super.onCreate(savedInstanceState); 30 31 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.R) { 32 Window w = getWindow(); 33 w.setDecorFitsSystemWindows(false); 34 w.setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS); 35 } else { 36 Window w = getWindow(); 37 w.setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS); 38 } 39 40 // --- 1. 【修复刘海屏】(不变) --- 41 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.P) { 42 Window w = getWindow(); 43 WindowManager.LayoutParams lp = w.getAttributes(); 44 lp.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES; 45 w.setAttributes(lp); 46 } 47 48 // --- 2. 【设置全屏播放器】 (不变) --- 49 50 this.webView = this.bridge.getWebView(); 51 52 this.webView.setWebChromeClient(new WebChromeClient() { 53 54 @Override 55 public void onShowCustomView(View view, CustomViewCallback callback) { 56 if (customView != null) { onHideCustomView(); return; } 57 customView = view; 58 customViewCallback = callback; 59 fullscreenContainer = new FrameLayout(MainActivity.this); 60 fullscreenContainer.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 61 fullscreenContainer.setBackgroundColor(getResources().getColor(android.R.color.black)); 62 fullscreenContainer.addView(customView, new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 63 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 64 decorView.addView(fullscreenContainer, new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); 65 66 hideSystemUI(); 67 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 68 } 69 70 @Override 71 public void onHideCustomView() { 72 if (customView == null) { return; } 73 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 74 decorView.removeView(fullscreenContainer); 75 fullscreenContainer = null; 76 customView = null; 77 if (customViewCallback != null) { 78 customViewCallback.onCustomViewHidden(); 79 } 80 81 showSystemUI(); 82 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 83 } 84 }); 85 } 86 87 // --- 3. 【【【“返回键”的“终极修复”（“复制”版）】】】 --- 88 @Override 89 public void onBackPressed() { 90 // a. 当用户按下“返回”... 91 92 // b. ...【优先】检查“全屏播放器”(`customView`) 是不是“正在显示” 93 if (this.customView != null) { 94 // c. ...如果是，我们就“退出全屏” 95 96 // ↓↓↓ 我们“复制” onHideCustomView() 里的代码 ↓↓↓ 97 ViewGroup decorView = (ViewGroup) getWindow().getDecorView(); 98 decorView.removeView(fullscreenContainer); 99 fullscreenContainer = null; 100 customView = null; 101 if (customViewCallback != null) { 102 customViewCallback.onCustomViewHidden(); 103 } 104 showSystemUI(); 105 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 106 // ↑↑↑ “复制”结束 ↑↑↑ 107 108 } 109 // d. ...【其次】检查“网页”(`webView`) 是不是“可以后退” 110 else if (this.webView != null \u0026amp;\u0026amp; this.webView.canGoBack()) { 111 // e. ...如果是，我们就在“网页”里后退 112 this.webView.goBack(); 113 } 114 // f. ...【最后】如果“既没有全屏”也“不能后退” (在主页) 115 else { 116 // g. ...我们就“退出APP” 117 super.onBackPressed(); 118 } 119 } 120 121 122 // --- 4. 【“智能”隐藏UI函数”（不变）】 --- 123 private void hideSystemUI() { 124 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.R) { 125 WindowInsetsController controller = getWindow().getInsetsController(); 126 if (controller != null) { 127 controller.hide(WindowInsets.Type.statusBars() | WindowInsets.Type.navigationBars()); 128 controller.setSystemBarsBehavior(WindowInsetsController.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE); 129 } 130 } else { 131 View decorView = getWindow().getDecorView(); 132 decorView.setSystemUiVisibility( 133 View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY 134 | View.SYSTEM_UI_FLAG_LAYOUT_STABLE 135 | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION 136 | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN 137 | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION 138 | View.SYSTEM_UI_FLAG_FULLSCREEN); 139 } 140 } 141 142 // --- 5. 【“智能”显示UI函数”（不变）】 --- 143 private void showSystemUI() { 144 if (Build.VERSION.SDK_INT \u0026gt;= Build.VERSION_CODES.R) { 145 WindowInsetsController controller = getWindow().getInsetsController(); 146 if (controller != null) { 147 controller.show(WindowInsets.Type.statusBars() | WindowInsets.Type.navigationBars()); 148 } 149 } else { 150 View decorView = getWindow().getDecorView(); 151 decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE); 152 } 153 } 154} 阶段四：更改 APP 图标 1：准备您的图标文件 您需要一张正方形的图片。\n格式： 最好是 .png 格式（支持透明背景）。\n尺寸： 尺寸越大越好，Android Studio 会自动帮您缩放。理想尺寸是 1024x1024 像素（512x512 也可以）。\n注意： 现代安卓图标有“安全区域”（通常是中间 66% 的圆形或圆角矩形）。请确保您的“核心”Logo 在这个安全区域内，否则它可能会被裁切。\n准备好这张 .png 文件，并把它放在您电脑上一个容易找到的位置（比如“桌面”）。\n2：使用 Android Studio 的“Asset Studio”工具 请回到您的 Android Studio（确保 D:\\Tools\\LunaTV\\android 项目是打开的）。\n在左上角的**“项目”文件浏览器**中（您之前找 MainActivity.java 的地方）。\n右键点击最顶层的那个 app 文件夹（它有一个蓝色的“a”图标）。\n在弹出的菜单中，移动到 \u0026ldquo;New\u0026rdquo; (新建) -\u0026gt; \u0026ldquo;Image Asset\u0026rdquo; (图像资产)。\n3. 配置您的新图标 点击后，会弹出一个叫 \u0026ldquo;Asset Studio\u0026rdquo; 的新窗口。\nIcon Type (图标类型)： 保持默认的 Launcher Icons (Adaptive \u0026amp; Legacy)。\nName (名称)： 保持默认的 ic_launcher。\nSource Asset (源资产)：\n在 Path (路径) 这一行，点击它最右边的**“文件夹”图标**。\n在弹出的文件选择器中，找到并选择您在步骤 1 中准备好的那张 .png 图标文件。\n点击 OK。\n调整 (Scaling)：\n您会立刻在右侧的“预览”窗口看到您的图标。\n您可能会看到一个“安全区”的圆圈。\n在中间的 Resize (调整大小) 滑块上，您可以左右拖动，把您的图标缩放到您觉得合适的大小（通常是让它刚好填满那个“安全区”）。\n（可选）Background Layer (背景层)：\n如果您的 .png 是透明的，您可以在这里给它加一个纯色背景。\n在 Name: ic_launcher 的下方，您会看到三个标签页 (Tab)：\nForeground Layer (前景层) \u0026lt;\u0026ndash; 您现在在这里！（它是蓝色的）\nBackground Layer (背景层) \u0026lt;\u0026ndash; 您要点击这里！\nOptions (选项)\n点击一下第二个标签页，也就是 Background Layer (背景层)\nSource Asset -\u0026gt; Asset Type -\u0026gt; Color (颜色)， 然后选择您想要的背景色。 4. 生成图标 当您对预览满意后，点击右下角的 \u0026ldquo;Next\u0026rdquo; (下一步) 按钮。\n它会弹出一个新窗口，显示它将要**“覆盖”**（Overwrite）一大堆旧的 ic_launcher.png 文件。\n这是正常的，这正是我们想要的。\n点击右下角的 \u0026ldquo;Finish\u0026rdquo; (完成) 按钮。\nAndroid Studio 现在会自动生成所有不同尺寸（mdpi, hdpi, xhdpi 等）的图标，并替换掉项目里默认的那个 Capacitor 图标。\n阶段五：启动logo图标 1. 准备您的新图片 请您准备好您自己的“启动页面”图片（例如，您桌面上有一个 logo.png）。\n重要：您不需要准备11个版本。您只需要一张高分辨率的 .png 文件。\n尺寸如：215*215，底色透明。\n2. 添加logo.png 请您再次找到并打开那个文件： app -\u0026gt; res -\u0026gt; drawable -\u0026gt; splash_layout.xml\n回到 Android Studio。\n在左侧文件树中，找到 res/drawable 文件夹。\n右键点击 drawable 文件夹-\u0026gt;open in-\u0026gt;Explorer\u0026quot; (在资源管理器中显示)。\nWindows 文件夹会打开 drawable 文件夹。\n把logo.png 复制到这个文件夹里。 (我们不再需要 drawable-hdpi那些文件夹了)\n###3. 创建“智能”布局文件 (splash_layout.xml)\n回到 Android Studio。\n右键点击 res/drawable 文件夹。\n选择 \u0026ldquo;New\u0026rdquo; (新建) -\u0026gt; \u0026ldquo;Drawable Resource File\u0026rdquo; (Drawable 资源文件)。\nFile name (文件名): 请输入 splash_layout\nRoot element (根元素): 请输入 layer-list\n点击 OK。\n一个新的 splash_layout.xml 文件会生成。\n在资源管理器中记事本打开，然后替换粘贴以下全部代码：\n1\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; 2\u0026lt;layer-list xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; 3 4 \u0026lt;item\u0026gt; 5 \u0026lt;color android:color=\u0026#34;?android:attr/colorBackground\u0026#34; /\u0026gt; 6 \u0026lt;/item\u0026gt; 7 8 \u0026lt;item 9 android:width=\u0026#34;200dp\u0026#34; 10 android:height=\u0026#34;200dp\u0026#34; 11 android:drawable=\u0026#34;@drawable/logo\u0026#34; 12 android:gravity=\u0026#34;center\u0026#34; /\u0026gt; 13 14\u0026lt;/layer-list\u0026gt; *（重要！） 在粘贴后，请务必修改 android:drawable=\u0026quot;@drawable/logo\u0026quot; 这一行，把 logo 改成您自己的文件名（不带 .png）。\n保存并关闭 splash_layout.xml。 4. 告诉 APP 使用“新”的启动页 打开 res/values/styles.xml 文件。\n找到 AppTheme.NoActionBarLaunch 这一段，整个\u0026lt;style\u0026gt;替换修改成\n1 \u0026lt;style name=\u0026#34;AppTheme.NoActionBarLaunch\u0026#34; parent=\u0026#34;AppTheme.NoActionBar\u0026#34;\u0026gt; 2 \u0026lt;item name=\u0026#34;android:windowBackground\u0026#34;\u0026gt;@drawable/splash_layout\u0026lt;/item\u0026gt; 3 \u0026lt;item name=\u0026#34;windowActionBar\u0026#34;\u0026gt;false\u0026lt;/item\u0026gt; 4 \u0026lt;item name=\u0026#34;windowNoTitle\u0026#34;\u0026gt;true\u0026lt;/item\u0026gt; 5 \u0026lt;/style\u0026gt; 或者\n1 \u0026lt;style name=\u0026#34;AppTheme.NoActionBarLaunch\u0026#34; parent=\u0026#34;Theme.AppCompat.Light.NoActionBar\u0026#34;\u0026gt; 2 \u0026lt;item name=\u0026#34;android:windowBackground\u0026#34;\u0026gt;@drawable/splash_layout\u0026lt;/item\u0026gt; 3 \u0026lt;item name=\u0026#34;windowActionBar\u0026#34;\u0026gt;false\u0026lt;/item\u0026gt; 4 \u0026lt;item name=\u0026#34;windowNoTitle\u0026#34;\u0026gt;true\u0026lt;/item\u0026gt; 5 \u0026lt;/style\u0026gt; 保存并关闭 styles.xml。\n（可选，但推荐） 为了省空间，您可以删除掉那 11 张旧的 splash.png 文件了（在 drawable 文件夹下的 splash (11) 组上点右键 -\u0026gt; \u0026ldquo;Delete\u0026rdquo;）。\n阶段六：【打包】生成最终的 APK 在 Android Studio 中，点击顶部菜单栏的 \u0026ldquo;Build\u0026rdquo; (构建)。\n选择 \u0026ldquo;Generate App Bundles or APKs\u0026rdquo; (生成\u0026hellip;)。\n在子菜单中，选择 \u0026ldquo;Generate APKs\u0026rdquo; (生成 APKs)。\n等待构建完成（BUILD SUCCESSFUL）。\n在右下角弹出的通知中，点击 \u0026ldquo;Locate\u0026rdquo; (定位)。\n最终成品： 您会得到 app-debug.apk 文件，它现在是“布局完美”且“功能完美”的。\n附加七：更新操作 1. 如修改app名、App ID、server.url 路径：D:\\Tools\\MyNavApp\\capacitor.config.ts 用记事本打开您项目根目录的capacitor.config.ts文件 1{ 2 \u0026#34;appId\u0026#34;: \u0026#34;com.myname.nav\u0026#34;, 3 \u0026#34;appName\u0026#34;: \u0026#34;我的新导航名字\u0026#34;, \u0026lt;-- 修改这里 4 \u0026#34;webDir\u0026#34;: \u0026#34;public\u0026#34;, 5 \u0026#34;server\u0026#34;: { 6 \u0026#34;url\u0026#34;: \u0026#34;https://...\u0026#34; 7 } 8} 保存文件 2. 同步”到安卓 打开 cmd 命令行，进入您的项目目录： 1cd D:\\Tools\\MyNavApp 运行同步命令： 1npx cap sync android 3. 重新打包： 打开 Android Studio（D:\\Tools\\MyNavApp\\android）。\nAndroid Studio -\u0026gt; file -\u0026gt; Sync project\u0026hellip; -\u0026gt; 请点击它。\n\u0026ldquo;Build\u0026rdquo; -\u0026gt; \u0026ldquo;Generate \u0026hellip; APKs\u0026rdquo; -\u0026gt; \u0026ldquo;Generate APKs\u0026rdquo;。\n","permalink":"http://localhost:1313/posts/%E5%B0%81%E8%A3%85lunatv%E7%BD%91%E9%A1%B5%E7%AB%AF%E6%88%90app/","summary":"\u003cp\u003e将 LunaTV（xuhxjx/LunaTV）这个纯网页项目，打包成一个安卓 APP。这个 APP 必须能正确处理全屏播放（自动旋转、隐藏状态栏、适配刘海屏），并且在启动和退出全屏时能正确显示/隐藏状态栏。\u003c/p\u003e","title":"封装LunaTV网页端成app"},{"content":"只要做一个“空壳” APP，它唯一的目的就是打开您在网址（server.url），然后适应手机的手势。\n步骤一 1.打开 cmd 命令行，进入这个新的、空的文件夹： 1##新建文件夹 2mkdir d:\\Tools\\dav 3##进入文件夹目录 4d: 5cd D:\\Tools\\dav 2. 安装“打包工具”： 1npm install @capacitor/core @capacitor/android @capacitor/cli 3. 初始化 Capacitor： 1npx cap init App Name? -\u0026gt; 我的导航 (您自己起名)\nApp ID? -\u0026gt; com.myname.nav (您自己起ID)\nweb asset directory? -\u0026gt; public\n###4. 创建“欺骗”用的文件夹和文件：\n（npx cap init 不会创建 public 文件夹，我们必须手动创建）\n在 cmd 中运行：\n1mkdir public （public 文件夹里必须有一个 index.html）\n在 cmd 中运行：\n1echo \u0026#34;\u0026lt;html\u0026gt;\u0026lt;/html\u0026gt;\u0026#34; \u0026gt; public/index.html 修改配置文件：\n用记事本打开 D:\\Tools\\Nav\\capacitor.config.json。\n确保它看起来是这样的（webDir: \u0026lsquo;public\u0026rsquo; 并且有 server.url）：\n1{ 2 \u0026#34;appId\u0026#34;: \u0026#34;com.myname.nav\u0026#34;, 3 \u0026#34;appName\u0026#34;: \u0026#34;我的导航\u0026#34;, 4 \u0026#34;webDir\u0026#34;: \u0026#34;public\u0026#34;, 5 6 \u0026#34;server\u0026#34;: { 7 \u0026#34;url\u0026#34;: \u0026#34;https://[您的导航站网址]\u0026#34; 8 } 9} 5. 添加 Android 平台： 1npx cap add android 6. 同步配置： 1npx cap sync android 步骤二 1. 注入“链接”修复代码 打开 Android Studio\n打开您的新项目：D:\\Tools\\MyNavApp\\android。\n等待 Gradle 同步（这会很慢，因为它是一个新项目，需要下载“零件”）。\n【关键】 找到您的 MainActivity.java：\napp -\u0026gt; java -\u0026gt; com.myname.nav (您在步骤1里起的新ID) -\u0026gt; MainActivity.java\n双击打开它。\n删除里面的所有内容。\n粘贴这个新的、专门为“导航站”准备的“魔法代码”：\n1// 【【【【【 这是您在 init 时的 ID 】】】】】 2package com.xxsky.nav; 3 4import android.os.Bundle; 5import android.webkit.WebSettings; 6import android.webkit.WebView; 7import android.webkit.WebViewClient; 8import com.getcapacitor.BridgeActivity; 9// (注意：我们不再需要 \u0026#34;OnBackPressedCallback\u0026#34; 了) 10 11public class MainActivity extends BridgeActivity { 12 13 // 我们需要把 webView 变量放在这里，以便“返回键”能“看到”它 14 private WebView webView; 15 16 @Override 17 public void onCreate(Bundle savedInstanceState) { 18 super.onCreate(savedInstanceState); 19 20 // 1. 【链接修复】(和之前一样) 21 // 我们把 webView 存到“全局”变量里 22 this.webView = this.bridge.getWebView(); 23 24 WebSettings webSettings = this.webView.getSettings(); 25 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); 26 27 this.webView.setWebViewClient(new WebViewClient() { 28 @Override 29 public boolean shouldOverrideUrlLoading(WebView view, String url) { 30 view.loadUrl(url); 31 return true; 32 } 33 }); 34 } 35 36 // --- 2. 【【【这就是“返回键”的“终极修复”（安全版）】】】 --- 37 38 // 我们“覆盖”那个“旧的、可靠的” onBackPressed 函数 39 @Override 40 public void onBackPressed() { 41 // a. 当用户按下“返回”... 42 43 // b. ...我们检查“浏览器”是否可以后退 44 if (this.webView.canGoBack()) { 45 // c. ...如果可以，我们就在“浏览器”里后退 46 this.webView.goBack(); 47 } else { 48 // d. ...如果不能(在主页)，我们就调用“系统默认”的返回 (也就是“退出APP”) 49 super.onBackPressed(); 50 } 51 } 52} 或者有沉浸式功能的\n1// 【【【 关键：这是您的 ID ！】】】 2package com.navgo.hxjx; 3 4import android.graphics.Color; // \u0026lt;-- 【新】导入“颜色” 5import android.os.Bundle; 6import android.view.View; // \u0026lt;-- 【新】导入“View” 7import android.webkit.WebSettings; 8import android.webkit.WebView; 9import android.webkit.WebViewClient; 10import com.getcapacitor.BridgeActivity; 11import com.getcapacitor.WebViewListener; // 导入“安全”工具 12 13public class MainActivity extends BridgeActivity { 14 15 // 我们需要把 webView 变量放在这里，以便“返回键”能“看到”它 16 private WebView webView; 17 18 @Override 19 public void onCreate(Bundle savedInstanceState) { 20 super.onCreate(savedInstanceState); 21 22 // --- 【【【这就是“沉浸式”的“终极修复”】】】 --- 23 // 这会“强行”让窗口画在状态栏下面 (导致“重叠”) 24 // 并且把状态栏设为“透明” 25 getWindow().getDecorView().setSystemUiVisibility( 26 View.SYSTEM_UI_FLAG_LAYOUT_STABLE | 27 View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN 28 ); 29 getWindow().setStatusBarColor(Color.TRANSPARENT); 30 // 31 32 // 1. 【链接修复】(和之前一样) 33 // 我们把 webView 存到“全局”变量里 34 this.webView = this.bridge.getWebView(); 35 36 WebSettings webSettings = this.webView.getSettings(); 37 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); 38 39 this.webView.setWebViewClient(new WebViewClient() { 40 @Override 41 public boolean shouldOverrideUrlLoading(WebView view, String url) { 42 view.loadUrl(url); 43 return true; 44 } 45 }); 46 } 47 48 // --- 2. 【【【这就是“返回键”的“终极修复”（安全版）】】】 --- 49 50 // 我们“覆盖”那个“旧的、可靠的” onBackPressed 函数 51 @Override 52 public void onBackPressed() { 53 // a. 当用户按下“返回”... 54 55 // b. ...我们检查“浏览器”是否可以后退 56 if (this.webView.canGoBack()) { 57 // c. ...如果可以，我们就在“浏览器”里后退 58 this.webView.goBack(); 59 } else { 60 // d. ...如果不能(在主页)，我们就调用“系统默认”的返回 (也就是“退出APP”) 61 super.onBackPressed(); 62 } 63 } 64} 步骤三 更改 APP 图标\n1：准备您的图标文件 您需要一张正方形的图片。\n格式： 最好是 .png 格式（支持透明背景）。\n尺寸： 尺寸越大越好，Android Studio 会自动帮您缩放。理想尺寸是 1024x1024 像素（512x512 也可以）。\n注意： 现代安卓图标有“安全区域”（通常是中间 66% 的圆形或圆角矩形）。请确保您的“核心”Logo 在这个安全区域内，否则它可能会被裁切。\n准备好这张 .png 文件，并把它放在您电脑上一个容易找到的位置（比如“桌面”）。\n2：使用 Android Studio 的“Asset Studio”工具 请回到您的 Android Studio（确保 D:\\Tools\\LunaTV\\android 项目是打开的）。\n在左上角的**“项目”文件浏览器**中（您之前找 MainActivity.java 的地方）。\n右键点击最顶层的那个 app 文件夹（它有一个蓝色的“a”图标）。\n在弹出的菜单中，移动到 \u0026ldquo;New\u0026rdquo; (新建) -\u0026gt; \u0026ldquo;Image Asset\u0026rdquo; (图像资产)。\n3. 配置您的新图标 点击后，会弹出一个叫 \u0026ldquo;Asset Studio\u0026rdquo; 的新窗口。\nIcon Type (图标类型)： 保持默认的 Launcher Icons (Adaptive \u0026amp; Legacy)。\nName (名称)： 保持默认的 ic_launcher。\nSource Asset (源资产)：\n在 Path (路径) 这一行，点击它最右边的**“文件夹”图标**。\n在弹出的文件选择器中，找到并选择您在步骤 1 中准备好的那张 .png 图标文件。\n点击 OK。\n调整 (Scaling)：\n您会立刻在右侧的“预览”窗口看到您的图标。\n您可能会看到一个“安全区”的圆圈。\n在中间的 Resize (调整大小) 滑块上，您可以左右拖动，把您的图标缩放到您觉得合适的大小（通常是让它刚好填满那个“安全区”）。\n（可选）Background Layer (背景层)：\n如果您的 .png 是透明的，您可以在这里给它加一个纯色背景。\n在 Name: ic_launcher 的下方，您会看到三个标签页 (Tab)：\nForeground Layer (前景层) \u0026lt;\u0026ndash; 您现在在这里！（它是蓝色的）\nBackground Layer (背景层) \u0026lt;\u0026ndash; 您要点击这里！\nOptions (选项)\n点击一下第二个标签页，也就是 Background Layer (背景层)\nSource Asset -\u0026gt; Asset Type -\u0026gt; Color (颜色)， 然后选择您想要的背景色。 4. 生成图标 当您对预览满意后，点击右下角的 \u0026ldquo;Next\u0026rdquo; (下一步) 按钮。\n它会弹出一个新窗口，显示它将要**“覆盖”**（Overwrite）一大堆旧的 ic_launcher.png 文件。\n这是正常的，这正是我们想要的。\n点击右下角的 \u0026ldquo;Finish\u0026rdquo; (完成) 按钮。\nAndroid Studio 现在会自动生成所有不同尺寸（mdpi, hdpi, xhdpi 等）的图标，并替换掉项目里默认的那个 Capacitor 图标。\n步骤四： 启动logo图标\n1. 准备您的新图片 请您准备好您自己的“启动页面”图片（例如，您桌面上有一个 logo.png）。\n重要：您不需要准备11个版本。您只需要一张高分辨率的 .png 文件。\n尺寸如：215*215，底色透明。\n2. 添加logo.png 请您再次找到并打开那个文件： app -\u0026gt; res -\u0026gt; drawable -\u0026gt; splash_layout.xml\n回到 Android Studio。\n在左侧文件树中，找到 res/drawable 文件夹。\n右键点击 drawable 文件夹-\u0026gt;open in-\u0026gt;Explorer\u0026quot; (在资源管理器中显示)。\nWindows 文件夹会打开 drawable 文件夹。\n把logo.png 复制到这个文件夹里。 (我们不再需要 drawable-hdpi那些文件夹了)\n###3. 创建“智能”布局文件 (splash_layout.xml)\n回到 Android Studio。\n右键点击 res/drawable 文件夹。\n选择 \u0026ldquo;New\u0026rdquo; (新建) -\u0026gt; \u0026ldquo;Drawable Resource File\u0026rdquo; (Drawable 资源文件)。\nFile name (文件名): 请输入 splash_layout\nRoot element (根元素): 请输入 layer-list\n点击 OK。\n一个新的 splash_layout.xml 文件会生成。\n在资源管理器中记事本打开，然后替换粘贴以下全部代码：\n1\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; 2\u0026lt;layer-list xmlns:android=\u0026#34;http://schemas.android.com/apk/res/android\u0026#34;\u0026gt; 3 4 \u0026lt;item\u0026gt; 5 \u0026lt;color android:color=\u0026#34;?android:attr/colorBackground\u0026#34; /\u0026gt; 6 \u0026lt;/item\u0026gt; 7 8 \u0026lt;item 9 android:width=\u0026#34;200dp\u0026#34; 10 android:height=\u0026#34;200dp\u0026#34; 11 android:drawable=\u0026#34;@drawable/logo\u0026#34; 12 android:gravity=\u0026#34;center\u0026#34; /\u0026gt; 13 14\u0026lt;/layer-list\u0026gt; *（重要！） 在粘贴后，请务必修改 android:drawable=\u0026quot;@drawable/logo\u0026quot; 这一行，把 logo 改成您自己的文件名（不带 .png）。\n保存并关闭 splash_layout.xml。 4. 告诉 APP 使用“新”的启动页 打开 res/values/styles.xml 文件。\n找到 AppTheme.NoActionBarLaunch 这一段，整个\u0026lt;style\u0026gt;替换修改成\n1 \u0026lt;style name=\u0026#34;AppTheme.NoActionBarLaunch\u0026#34; parent=\u0026#34;AppTheme.NoActionBar\u0026#34;\u0026gt; 2 \u0026lt;item name=\u0026#34;android:windowBackground\u0026#34;\u0026gt;@drawable/splash_layout\u0026lt;/item\u0026gt; 3 \u0026lt;item name=\u0026#34;windowActionBar\u0026#34;\u0026gt;false\u0026lt;/item\u0026gt; 4 \u0026lt;item name=\u0026#34;windowNoTitle\u0026#34;\u0026gt;true\u0026lt;/item\u0026gt; 5 \u0026lt;/style\u0026gt; 或者\n1 \u0026lt;style name=\u0026#34;AppTheme.NoActionBarLaunch\u0026#34; parent=\u0026#34;Theme.AppCompat.Light.NoActionBar\u0026#34;\u0026gt; 2 \u0026lt;item name=\u0026#34;android:windowBackground\u0026#34;\u0026gt;@drawable/splash_layout\u0026lt;/item\u0026gt; 3 \u0026lt;item name=\u0026#34;windowActionBar\u0026#34;\u0026gt;false\u0026lt;/item\u0026gt; 4 \u0026lt;item name=\u0026#34;windowNoTitle\u0026#34;\u0026gt;true\u0026lt;/item\u0026gt; 5 \u0026lt;/style\u0026gt; 保存并关闭 styles.xml。\n（可选，但推荐） 为了省空间，您可以删除掉那 11 张旧的 splash.png 文件了（在 drawable 文件夹下的 splash (11) 组上点右键 -\u0026gt; \u0026ldquo;Delete\u0026rdquo;）。\n步骤五： 打包生成最终的 APK\n1. 在 Android Studio 中，点击顶部菜单栏的 \u0026ldquo;Build\u0026rdquo; (构建)。 2. 选择 \u0026ldquo;Generate App Bundles or APKs\u0026rdquo; (生成\u0026hellip;)。 3. 在子菜单中，选择 \u0026ldquo;Generate APKs\u0026rdquo; (生成 APKs)。 4. 等待构建完成（BUILD SUCCESSFUL）。 5. 在右下角弹出的通知中，点击 \u0026ldquo;Locate\u0026rdquo; (定位)。 6. 最终成品： 您会得到 app-debug.apk 文件，它现在是“布局完美”且“功能完美”的。","permalink":"http://localhost:1313/posts/%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85%E7%BD%91%E9%A1%B5app/","summary":"\u003cp\u003e只要做一个“空壳” APP，它唯一的目的就是打开您在网址（server.url），然后适应手机的手势。\u003c/p\u003e","title":"简单封装网页app"}]